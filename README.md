


# Scheduler Backend

Scheduler description

# Table of contents:
![Build status](https://img.shields.io/travis/request/request/master.svg?style=flat-square)  ![Dependency Status](https://img.shields.io/david/request/request.svg?style=flat-square) ![Known Vulnerabilities](https://snyk.io/test/npm/request/badge.svg?style=flat-square)
- [Pre-reqs](#pre-reqs)
- [Getting started](#getting-started)
- [Scheduler Backend](#Scheduler-backend)
	- [Project Structure](#project-structure)
	- [ESLint](#eslint)
- [Dependencies](#dependencies)
	- [`dependencies`](#dependencies-1)
	- [`devDependencies`](#devdependencies)

# Pre-reqs
To build and run this app locally you will need a few things:
- Install [Node.js](https://nodejs.org/en/)(VERSION 10.16.0)
- Install [Sequelize](http://docs.sequelizejs.com/manual/getting-started.html#installing)(VERSION 5.9.4)
- Install [Sequelize-CLI](https://www.npmjs.com/package/sequelize-cli)(VERSION 5.5.0)
- Install [VS Code](https://code.visualstudio.com/)

# Getting started
- Clone the repository
```
git clone git@bitbucket.org:vladmoshe/ovada_cm_scheduler_backend.git
```
- Install dependencies
```
cd <Scheduler-server>
npm install
```
- Configure app with your local MYSQL server.
```bash
# go to config file
cd /src/config
# update the cofig.js with your current local setting
sudo nano config.json
```
- Run the project
```
npm run dev
```

Finally, navigate to `http://localhost:8080` and you should see the backend is running. Now you will test apis with postman!

# Scheduler Backend
Note that all of this has already been setup for this project, but feel free to use this as a reference for converting other Node.js projects.

## Project Structure
The full folder structure of this app is explained below:

> **Note!** Make sure you have already test the app using `npm run test`

| Name | Description |
| ------------------------ | --------------------------------------------------------------------------------------------- |
| **.vscode**              | Contains VS Code specific settings.                                                           |
| **src**                  | Contains the source code written in Typescript.                                                      |
| **src/config**           | Contains the configutations for the application databases etc.                                |
| **src/controllers**      | Responsible for transforming any operation result to an HTTP response.                        |                                                |
| **src/mock**           | Contains mock data for testing.                                                               |
| **src/models**           | Contains your typescript-sequelize models.                                                               |
| **src/routes**           | Contains all your application routes.                                                               |
| **src/repositories**     | Responsible for providing the data for the service.                                           |
| **src/services**         | Responsible for implementing the business logic, and provide the operation result.         |
| **src/shared**           | Contains shared element within classes or modules.                                            |
| **src/utils**            | Contains application's utilities.                                                             |
| **app.ts**               | Main application file and contains express application configurations.                        |
| **test**                 | Contain all the test files.                                                   |
| **build**                 | Contain all the build files for production.                                                   |
| **node_modules**         | Contains all your npm dependencies.                                                           |
| **package.json**            | Contains all your npm modules.                                          |
| **tslint.json**            | Contains all your configurable rules.                                          |
| **tsconfig.json**            | Contains all your configration about typescript.                                          |
| **error.log**            | Contains error logs that will generated by winston.                                           |

### Running the scripts
Npm scripts basically allow us to call (and chain) terminal commands via npm.
This is nice because most JavaScript tools have easy to use command line utilities allowing us to not need grunt or gulp to manage our builds.
If you open `package.json`, you will see a `scripts` section with all the different scripts you can call.
To call a script, simply run `npm run <script-name>` from the command line.

Below is a list of all the scripts this template has available:


| Npm Script | Description |
| ------------------------- | ------------------------------------------------------------------------------------------------- |
| `start`                   | Run the `./app.js` main file. Can be invoked with `npm start`.   |
| `start:dev`             | Run the application in development using webpack.        |
| `test`             | Run the test file.        |
| `build`                   | Full build for production.                                                         |
| `dev`                     | Runs nodemon on `src/app.js` which is the apps entry point.         |
| `copy-config`             | Copies the sequelize config file into dist/config directory.        |


## TSLint
ESLint is a code linter which mainly helps catch minor code quality and style issues.

### TSLint rules
Like most linters, TSLint has a wide set of configurable rules as well as support for custom rule sets.
All rules are configured through `tslint.json`.

# Dependencies
Dependencies are managed through `package.json`.
In that file you'll find two sections:

## `dependencies`

| Package                         | Description                                                           |
| ------------------------------- | --------------------------------------------------------------------- |
| dotenv                          | Loads environment variables from .env file.                           |
| express                         | Node.js web framework.                                                |
| lusca                           | CSRF middleware.                                                      |
| morgan                          | HTTP request logger middleware for node.js.                           |
| mysql2                          | MySQL client for Node.js with focus on performance.                   |
| sequelize                       | Sequelize is a promise-based Node.js ORM for Postgres, MySQL, MariaDB, SQLite and Microsoft SQL Server.             |
| winston                         | Logging library                                                       |
| axios                         | Promise based HTTP client for the browser and node.js                                                      |
| cors                         | package for providing a [Connect](http://www.senchalabs.org/connect/)/[Express](http://expressjs.com/) middleware that can be used to enable [CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) with various options                                                      |
| webpack                         | A module bundler. Its main purpose is to bundle JavaScript files.                        |
| connect-timeout                         | Times out a request in the Connect/Express application framework.                                                    |
| sequelize-typescript                        | Give Typescript definitions for sequelize.                                                    |
| reflect-metadata                         | Allows you to do runtime reflection on types                                                       |


## `devDependencies`

| Package                         | Description                                                            |
| ------------------------------- | ---------------------------------------------------------------------- |
| nodemon                         | nodemon is a tool that helps develop node.js based applications by automatically restarting the node application when file changes in the directory are detected.             |
| shelljs                         | Portable Unix shell commands for Node.js.                              |
| @types/axios                       | This is a stub types definition for axios.                            |
| @types/bluebird                        | This package contains type definitions for bluebird.               |
| @types/body-parser                        | This package contains type definitions for body-parser.                    |
| @types/chalk                         | This package contains type definitions for chalk.              |
| @types/cors                      | This package contains type definitions for cors.                             |
| @types/dotenv                       | This package contains type definitions for dotenv.               |
| @types/express                     | This package contains type definitions for express.                              |
| @types/lusca                       | This package contains type definitions for lusca. |
| @types/morgan                      | This package contains type definitions for morgan.                              |
| @types/node                        | This package contains type definitions for node.                              |
| @types/validator                      | This package contains type definitions for validator.     |
| @types/winston                         |This package contains type definitions for winston.   |
| ts-loader                         | TypeScript loader for webpack  |
| ts-node                         | TypeScript execution and REPL for node.js  |
| tslint                         | TSLint is an extensible static analysis tool that checks TypeScript code for readability, maintainability, and functionality errors  |
| typescript                         | C_TypeScript_ is a language for application scale JavaScript development.  |
| webpack-cli                         | CLI for webpack. |
| webpack-node-externals                       | Webpack allows you to define [_externals_](https://webpack.js.org/configuration/externals) - modules that should not be bundled.                             |

To install or update these dependencies you can use `npm install` or `npm update`.

## License
Copyright (c) Deline Media LLC. All rights reserved.
Licensed under the [MIT](LICENSE.txt) License.